{"version":3,"file":"Products-dbg.controller.js","names":["getRouter","___util_router","ButtonType","sap_m_library","ValueState","sap_ui_core_library","formatter","_interopRequireDefault","__formatter","Products","Controller","extend","constructor","prototype","apply","arguments","AddItemDialog","MessageView","Popover","BackButton","onInit","_onInit","loadFragment","name","then","oFragment","byId","bindAggregation","path","template","MessageItem","title","counter","type","subtitle","description","setIcon","IconPool","getIconURI","catch","error","MessageToast","show","onItemSelect","_onItemSelect","oEvent","source","getSource","ctx","getBindingContext","data","getObject","router","navTo","id","ID","validate","_validate","input","key","getProperty","value","getValue","length","setValueState","Error","setValueStateText","Success","parseFloat","isNaN","getValues","_getValues","items","reduce","acc","item","errors","hasErrors","values","submit","_submit","content","getControlsByFieldGroupId","filter","getId","includes","form","jModel","JSONModel","correctItems","MessageType","Object","entries","map","_ref","join","keys","incorrectItems","_ref2","setData","_ref3","navigateBack","setModel","openBy","oModel","getView","getModel","payload","createEntry","properties","Math","floor","random","toString","close","submitChanges","success","onDialogPress","_onDialogPress","bind","addStyleClass","Dialog","beginButton","Button","Emphasized","text","press","endButton","addDependent","open","onChange","_onChange","onErrorBack","_onErrorBack","setVisible","closePopover","_closePopover","onErrorItemClick","_onErrorItemClick"],"sources":["Products.controller.ts"],"sourcesContent":["import type { Product } from \"@/model/types/ODataDemoModel\";\nimport { getRouter } from \"../util/router\";\nimport Button from \"sap/m/Button\";\nimport Dialog from \"sap/m/Dialog\";\nimport { ButtonType } from \"sap/m/library\";\nimport type Event from \"sap/ui/base/Event\";\nimport type ManagedObject from \"sap/ui/base/ManagedObject\";\nimport Controller from \"sap/ui/core/mvc/Controller\";\nimport Input from \"sap/m/Input\";\nimport VerticalLayout from \"sap/ui/layout/VerticalLayout\";\nimport { ValueState } from \"sap/ui/core/library\";\nimport Popover from \"sap/m/Popover\";\nimport type Control from \"sap/ui/core/Control\";\nimport MessageView from \"sap/m/MessageView\";\nimport MessageItem, { type $MessageItemSettings } from \"sap/m/MessageItem\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport IconPool from \"sap/ui/core/IconPool\";\nimport MessageType from \"sap/ui/core/message/MessageType\";\nimport type ODataModel from \"sap/ui/model/odata/v2/ODataModel\";\nimport MessageToast from \"sap/m/MessageToast\";\nimport formatter from \"../model/formatter\";\n\ntype FormKeys = keyof Pick<Product, \"Name\" | \"Price\" | \"Rating\">;\ntype Form = {\n  values: Record<FormKeys, string>;\n  errors: Record<FormKeys, string>;\n  hasErrors: boolean;\n};\n\n/**\n * @namespace project1.controller\n */\nexport default class Products extends Controller {\n  private AddItemDialog: Dialog | null = null;\n  private MessageView: MessageView | null = null;\n  private Popover: Popover | null = null;\n  private BackButton: Button | null = null;\n\n  public formatter = formatter;\n\n  public onInit(): void {\n    /* ------------------------------- 1. Popover ------------------------------- */\n    this.loadFragment({\n      name: \"project1.view.fragments.Errors\",\n    })\n      .then((oFragment) => {\n        this.Popover = oFragment as Popover;\n        this.MessageView = this.byId(\"errorMessageView\") as MessageView;\n        this.MessageView.bindAggregation(\"items\", {\n          path: \"messageModel>/\",\n          template: new MessageItem({\n            title: \"{messageModel>title}\",\n            counter: \"{messageModel>counter}\",\n            type: \"{messageModel>type}\",\n            subtitle: \"{messageModel>subtitle}\",\n            description: \"{messageModel>description}\",\n          }),\n        });\n        this.BackButton = this.byId(\"errorBackButton\") as Button;\n        this.BackButton.setIcon(IconPool.getIconURI(\"nav-back\"));\n      })\n      .catch((error) => {\n        MessageToast.show(`Failed to load form validation with error: ${error}`);\n      });\n  }\n\n  /**\n   * handles item click and redirects to detail page\n   * @public\n   * @param {sap.ui.base.Event} oEvent Standard UI5 event object\n   */\n  public onItemSelect(oEvent: Event) {\n    const source = oEvent.getSource<ManagedObject>();\n    const ctx = source.getBindingContext();\n    const data = ctx?.getObject() as Product;\n    const router = getRouter(this);\n    router.navTo(\"detail\", { id: data.ID });\n  }\n\n  /**\n   * Utility function to validate input fields\n   * used both in liveChange of input fields and on submit\n   * @private\n   * @param {Input} input Input field source\n   * @returns {boolean} wether the input is valid. `true` if valid\n   */\n  private validate(input: Input) {\n    const key = input.getProperty(\"name\") as keyof Form[\"values\"];\n    let error = \"\";\n    switch (key) {\n      case \"Name\": {\n        const value = input.getValue();\n        if (value.length === 0) {\n          input.setValueState(ValueState.Error);\n          error = \"Name is required\";\n          input.setValueStateText(error);\n        } else if (value.length > 40) {\n          input.setValueState(ValueState.Error);\n          error = \"Name must be less than 40 characters\";\n          input.setValueStateText(error);\n        } else {\n          input.setValueState(ValueState.Success);\n          input.setValueStateText(\"\");\n        }\n        break;\n      }\n      case \"Price\": {\n        const value = parseFloat(input.getValue());\n        if (isNaN(value)) {\n          input.setValueState(ValueState.Error);\n          error = \"Price must be a number\";\n          input.setValueStateText(error);\n        } else if (value < 0) {\n          input.setValueState(ValueState.Error);\n          error = \"Price must be a positive number\";\n          input.setValueStateText(error);\n        } else {\n          input.setValueState(ValueState.Success);\n          input.setValueStateText(\"\");\n        }\n        break;\n      }\n      case \"Rating\": {\n        const value = parseFloat(input.getValue());\n        if (isNaN(value)) {\n          input.setValueState(ValueState.Error);\n          error = \"Rating must be a number\";\n          input.setValueStateText(error);\n        } else if (value % 1 !== 0) {\n          input.setValueState(ValueState.Error);\n          error = \"Rating must be a whole number\";\n          input.setValueStateText(error);\n        } else if (value < 0 || value > 5) {\n          input.setValueState(ValueState.Error);\n          error = \"Rating must be between 0 and 5\";\n          input.setValueStateText(error);\n        } else {\n          input.setValueState(ValueState.Success);\n          input.setValueStateText(\"\");\n        }\n        break;\n      }\n    }\n    return error;\n  }\n\n  /**\n   * Transforms the input fields into a form object\n   * @param {Control[]} items Indivual inputs\n   * @returns {Form} Form object with values and errors\n   */\n  private getValues(items: Control[]) {\n    return items.reduce(\n      (acc, item) => {\n        const input = item as Input;\n        const key = input.getProperty(\"name\") as keyof Form[\"values\"];\n        const error = this.validate(input);\n        const value = input.getValue(); // OData always accepts strings\n\n        if (error) {\n          acc.errors[key] = error;\n          acc.hasErrors = true;\n        } else {\n          acc.values[key] = value;\n        }\n\n        return acc;\n      },\n      { errors: {}, values: {}, hasErrors: false } as Form\n    );\n  }\n\n  private submit(oEvent: Event, content: VerticalLayout) {\n    const items = content\n      .getControlsByFieldGroupId(\"newProduct\")\n      // filter out popup elements related to input\n      .filter((item) => !item.getId().includes(\"popup\"));\n\n    const form = this.getValues(items);\n\n    if (form.hasErrors) {\n      const jModel = new JSONModel();\n      const correctItems = {\n        type: MessageType.Success,\n        title: \"Correctly filled inputs\",\n        subtitle: \"No further action necessary\",\n        description: Object.entries(form.values)\n          .map(([key, value]) => `• ${key}: ${value}`)\n          .join(\"\\n\"),\n        counter: Object.keys(form.values).length,\n      } satisfies $MessageItemSettings;\n      const incorrectItems = {\n        type: MessageType.Error,\n        title: \"Incorrect fields\",\n        subtitle: \"Please correct the following errors\",\n        description: Object.entries(form.errors)\n          .map(([key, value]) => `• ${key}: ${value}`)\n          .join(\"\\n\"),\n        counter: Object.keys(form.errors).length,\n      } satisfies $MessageItemSettings;\n      // Add items to the view, remove items with 0 children\n      jModel.setData([correctItems, incorrectItems].filter(({ counter }) => counter));\n      this.MessageView?.navigateBack();\n      this.MessageView?.setModel(jModel, \"messageModel\");\n      this.Popover?.openBy(oEvent.getSource<Control>());\n    } else {\n      // succesful form validation - let's submit the row!\n      const oModel = this.getView()?.getModel() as ODataModel;\n      const payload: Partial<{\n        [K in keyof Product]: K extends FormKeys ? string : Product[K];\n      }> = form.values;\n      oModel.createEntry(\"/Products\", {\n        properties: {\n          ...payload,\n          // necessary otherwise the request fails\n          ID: Math.floor(Math.random() * 1001).toString(),\n        },\n      });\n      this.AddItemDialog?.close();\n      oModel.submitChanges({\n        success: () => {\n          MessageToast.show(\"Product successfully created!\");\n          this.AddItemDialog?.close();\n        },\n        error: () => {\n          MessageToast.show(\"Failed to create product! Please try again\");\n          this.AddItemDialog?.close();\n        },\n      });\n    }\n  }\n\n  /**\n   * opens a dialog to add a new product\n   * @public\n   */\n  public onDialogPress() {\n    if (!this.AddItemDialog) {\n      const close = () => this.AddItemDialog?.close();\n      close.bind(this);\n\n      this.loadFragment({\n        name: \"project1.view.fragments.NewProduct\",\n      })\n        .then((oFragment) => {\n          const content = oFragment as VerticalLayout;\n          content.addStyleClass(\"sapUiContentPadding\");\n          this.AddItemDialog = new Dialog({\n            title: \"New Product\",\n            content,\n            beginButton: new Button({\n              type: ButtonType.Emphasized,\n              text: \"OK\",\n              press: (oEvent) => this.submit(oEvent, content),\n            }),\n            endButton: new Button({\n              text: \"Close\",\n              press: close,\n            }),\n          });\n          this.getView()?.addDependent(this.AddItemDialog);\n          this.AddItemDialog.open();\n        })\n        .catch(() => {\n          MessageToast.show(\"Failed to load new product form\");\n        });\n    }\n    this.AddItemDialog?.open();\n  }\n\n  public onChange(oEvent: Event) {\n    const input = oEvent.getSource<Input>();\n    this.validate(input);\n  }\n\n  public onErrorBack() {\n    this.MessageView?.navigateBack();\n    this.BackButton?.setVisible(false);\n  }\n\n  public closePopover() {\n    this.Popover?.close();\n  }\n\n  public onErrorItemClick() {\n    this.BackButton?.setVisible(true);\n  }\n}\n"],"mappings":"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","ignoreList":[]}